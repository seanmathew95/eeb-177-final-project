source("~/PyRate/pyrate_utilities.r")
# we need to give the utilities a list of extant species
# looked at ouput graph of occurrences to see which species in the dataset are considered extant
extant_cats = c("Panthera tigris", "Panthera pardus", "Panthera onca",'Panthera leo','Lynx rufus','Felis silvestris','Felis serval','Felis rufus','Felis libyca','Felis concolor','Felis caracal','Acinonyx jubatus')
# use the extract.ages.pbdb() function in pyrate_utilities to reformat our dataset...
extract.ages.pbdb(file= "felidae_occ.csv",extant_species=extant_cats)
source("~/PyRate/pyrate_utilities.r")
# we need to give the utilities a list of extant species
# looked at ouput graph of occurrences to see which species in the dataset are considered extant
extant_cats = c("Panthera tigris", "Panthera pardus", "Panthera onca",'Panthera leo','Lynx rufus','Felis silvestris','Felis serval','Felis rufus','Felis libyca','Felis concolor','Felis caracal','Acinonyx jubatus')
# use the extract.ages.pbdb() function in pyrate_utilities to reformat our dataset...
extract.ages.pbdb(file= "felidae_occ.csv",extant_species=extant_cats)
extant_cats = c("Panthera tigris", "Panthera pardus", "Panthera onca",'Panthera leo','Lynx rufus','Felis silvestris','Felis serval','Felis rufus','Felis libyca','Felis concolor','Felis caracal','Acinonyx jubatus')
extract.ages.pbdb(file= "felidae_occ.csv", extant_species=extant_cats)
extract.ages.pbdb(file= "felidae_occ.csv", extant_species=extant_cats)
extract.ages.pbdb(file= "felidae_occ.csv", extant_species=extant_cats)
extract.ages.pbdb(file= "felidae_occ.csv", extant_species=extant_cats)
library(dplyr)
felids %>% arrange(minage)
library(ggplot2)
felids <- read.csv("felidae_ranges.csv", header = F, as.is = T)
names(felids) <- c("genus", "species", "minage", "maxage")
head(felids)
felids %>% arrange(minage)
felids
felids %>% arrange(minage)
felids <- felids %>% arrange(minage)
felids$maxage <- felids$maxage+0.5
felid_occ <- ggplot(felids, aes( species, ymin = maxage, ymax=minage, colour = genus))
felid_occ <- felid_occ + geom_linerange()
felid_occ <- felid_occ + theme(legend.position="none")
felid_occ <- felid_occ + coord_flip()
felid_occ <- felid_occ +  theme(axis.text.y = element_text(size=3))
felid_occ <- felid_occ + theme(axis.ticks.y=element_blank())
felid_occ <- felid_occ + scale_y_continuous(limits=c(0, 20), expand = c(0, 0), breaks=c(0, 5, 10, 15, 20))
felid_occ <- felid_occ + labs(title = "Felid Fossil Occurrences", x = "Species", y = "Ma ago") + theme(plot.title = element_text(hjust = 0.5, size=22, face = "bold"), axis.title =element_text(size=20))
felid_occ
View(felids)
felids <- felids %>% arrange(maxage)
felids$maxage <- felids$maxage+0.5
felid_occ <- ggplot(felids, aes( species, ymin = maxage, ymax=minage, colour = genus))
felid_occ <- felid_occ + geom_linerange()
felid_occ <- felid_occ + theme(legend.position="none")
felid_occ <- felid_occ + coord_flip()
felid_occ <- felid_occ +  theme(axis.text.y = element_text(size=3))
felid_occ <- felid_occ + theme(axis.ticks.y=element_blank())
felid_occ <- felid_occ + scale_y_continuous(limits=c(0, 20), expand = c(0, 0), breaks=c(0, 5, 10, 15, 20))
felid_occ <- felid_occ + labs(title = "Felid Fossil Occurrences", x = "Species", y = "Ma ago") + theme(plot.title = element_text(hjust = 0.5, size=22, face = "bold"), axis.title =element_text(size=20))
felid_occ
library(forcats)
install.packages(forcats)
installed.packages("forcats")
install.packages("forcats")
library(forcats)
felid_occ <- ggplot(felids, aes( x = fct_reorder(species, minage, .desc = T), maxage, colour = genus))
felid_occ <- felid_occ + geom_linerange())
felid_occ <- felid_occ + geom_linerange()
felid_occ <- felid_occ + theme(legend.position="none")
felid_occ <- felid_occ + coord_flip()
felid_occ <- felid_occ +  theme(axis.text.y = element_text(size=3))
felid_occ <- felid_occ + theme(axis.ticks.y=element_blank())
felid_occ <- felid_occ + scale_y_continuous(limits=c(0, 20), expand = c(0, 0), breaks=c(0, 5, 10, 15, 20))
felid_occ <- felid_occ + labs(title = "Felid Fossil Occurrences", x = "Species", y = "Ma ago") + theme(plot.title = element_text(hjust = 0.5, size=22, face = "bold"), axis.title =element_text(size=20))
felid_occ
felid_occ <- felid_occ + geom_linerange(aes(ymin = minage, ymax = maxage + 0.5))
felid_occ <- felid_occ + theme(legend.position="none")
felid_occ <- felid_occ + coord_flip()
felid_occ <- felid_occ +  theme(axis.text.y = element_text(size=3))
felid_occ <- felid_occ + theme(axis.ticks.y=element_blank())
felid_occ <- felid_occ + scale_y_continuous(limits=c(0, 20), expand = c(0, 0), breaks=c(0, 5, 10, 15, 20))
felid_occ <- felid_occ + labs(title = "Felid Fossil Occurrences", x = "Species", y = "Ma ago") + theme(plot.title = element_text(hjust = 0.5, size=22, face = "bold"), axis.title =element_text(size=20))
felid_occ
felid_occ <- felid_occ + geom_linerange(ymin = minage, ymax = maxage + 0.5)
felid_occ <- felid_occ + theme(legend.position="none")
felid_occ <- felid_occ + geom_linerange(ymin = minage, ymax = maxage + 0.5)
)
)
library("forcats")
felids <- felids %>% arrange(maxage)
felids$maxage <- felids$maxage+0.5
felid_occ <- ggplot(felids, aes( x = fct_reorder(species, minage, .desc = T), maxage, colour = genus))
felid_occ <- felid_occ + geom_linerange(ymin = minage, ymax = maxage + 0.5)
felid_occ <- felid_occ + geom_linerange(aes(ymin = minage, ymax = maxage + 0.5))
felid_occ <- felid_occ + theme(legend.position="none")
felid_occ <- felid_occ + coord_flip()
felid_occ <- felid_occ +  theme(axis.text.y = element_text(size=3))
felid_occ <- felid_occ + theme(axis.ticks.y=element_blank())
felid_occ <- felid_occ + scale_y_continuous(limits=c(0, 20), expand = c(0, 0), breaks=c(0, 5, 10, 15, 20))
felid_occ <- felid_occ + labs(title = "Felid Fossil Occurrences", x = "Species", y = "Ma ago") + theme(plot.title = element_text(hjust = 0.5, size=22, face = "bold"), axis.title =element_text(size=20))
felid_occ
ggsave(filename = "output_graphs/felid_occ.pdf", plot = felid_occ)
ggsave(filename = "output_pdf/felid_occ.pdf", plot = felid_occ)
ggplot(diversity, aes(x = age, y = diversity)) + geom_step()
diversity <- canids %>% gather(key = type, value = age, minage, maxage) %>% mutate(count = ifelse(type == "maxage", 1, -1)) %>% group_by(age) %>% summarise(count = sum(count))  %>% arrange(-age, -count) %>% mutate(diversity = cumsum(count))
diversity <- felids %>% gather(key = type, value = age, minage, maxage) %>% mutate(count = ifelse(type == "maxage", 1, -1)) %>% group_by(age) %>% summarise(count = sum(count))  %>% arrange(-age, -count) %>% mutate(diversity = cumsum(count))
library(tidyr)
extant_cats = c("Panthera tigris", "Panthera pardus", 'Sljdf lskf', "Panthera onca",'Panthera leo','Lynx rufus','Felis silvestris','Felis serval','Felis rufus','Felis libyca','Felis concolor','Felis caracal','Acinonyx jubatus')
extract.ages.pbdb(file= "felidae_occ.csv", extant_species=extant_cats)
extract.ages.pbdb()
source("~/PyRate/pyrate_utilities.r")
# we need to give the utilities a list of extant species
# looked at ouput graph of occurrences to see which species in the dataset are considered extant
extant_cats = c("Panthera tigris", "Panthera pardus", 'Sljdf lskf', "Panthera onca",'Panthera leo','Lynx rufus','Felis silvestris','Felis serval','Felis rufus','Felis libyca','Felis concolor','Felis caracal','Acinonyx jubatus')
# use the extract.ages.pbdb() function in pyrate_utilities to reformat our dataset...
extract.ages.pbdb(file= "felidae_occ.csv", extant_species=extant_cats)
extract.ages.pbdb()
extant_cats = c("Panthera tigris", "Panthera pardus","Sek alsjsl", "Panthera onca",'Panthera leo','Lynx rufus','Felis silvestris','Felis serval','Felis rufus','Felis libyca','Felis concolor','Felis caracal','Acinonyx jubatus')
extract.ages.pbdb(file= "felidae_occ.csv", extant_species=extant_cats)
extract.ages.pbdb()
library(tidyr)
library(dplyr)
diversity <- felids %>% gather(key = type, value = age, minage, maxage) %>% mutate(count = ifelse(type == "maxage", 1, -1)) %>% group_by(age) %>% summarise(count = sum(count))  %>% arrange(-age, -count) %>% mutate(diversity = cumsum(count))
ggplot(diversity, aes(x = age, y = diversity)) + geom_step()
ggsave(filename = "output_pdf/felid_div.png", plot = felid_div)
felid_div <- ggplot(diversity, aes(x = age, y = diversity)) + geom_step()
library(tidyr)
library(dplyr)
diversity <- felids %>% gather(key = type, value = age, minage, maxage) %>% mutate(count = ifelse(type == "maxage", 1, -1)) %>% group_by(age) %>% summarise(count = sum(count))  %>% arrange(-age, -count) %>% mutate(diversity = cumsum(count))
felid_div <- ggplot(diversity, aes(x = age, y = diversity)) + geom_step()
ggsave(filename = "output_pdf/felid_div.pdf", plot = felid_div)
felid_div <- ggplot(diversity, aes(x = age, y = diversity)) + geom_step()
library(tidyr)
library(dplyr)
diversity <- felids %>% gather(key = type, value = age, minage, maxage) %>% mutate(count = ifelse(type == "maxage", 1, -1)) %>% group_by(age) %>% summarise(count = sum(count))  %>% arrange(-age, -count) %>% mutate(diversity = cumsum(count))
felid_div <- ggplot(diversity, aes(x = age, y = diversity)) + geom_step()
felid_div
felid_div <- felid_div + labs(title = "Felidae Diversity Through Time", x = "Ma ago", y = "Number of Species") + theme(plot.title = element_text(hjust = 0.5, size=22, face = "bold"), axis.title =element_text(size=20))
felid_div <- felid_div + labs(title = "Felidae Diversity Through Time", x = "Ma ago", y = "Number of Species") + theme(plot.title = element_text(hjust = 0.5, size=22, face = "bold"), axis.title =element_text(size=20))
felid_div
ggsave(filename = "output_pdf/felid_div.pdf", plot = felid_div)
